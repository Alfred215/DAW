<!DOCTYPE html>
<html>

<head>
    <title>Ejercicio 2 AJAX</title>
    <script>
        function listarNoticias() {
            if (peticion_http.readyState == 4 && peticion_http.status == 200) {
                var listadoNoticia = peticion_http.responseXML.getElementsByTagName("noticia");
                for (i = 0; i < listadoNoticia.length; i++) {
                    crearItem(listadoNoticia[i].lastElementChild.textContent);
                    var listado = document.getElementById("lista");
                    var nuevoElemento = document.createElement("li");
                }
                alert("Datos recibidos");
            } else {
                alert("En proceso");
            }
        }

        function crearItem(item) {
            var listado = document.getElementById("lista");
            var nuevoElemento = document.createElement("li");
            var texto = document.createTextNode(item);
            nuevoElemento.appendChild(texto);
            listado.appendChild(nuevoElemento);
        }


    </script>
</head>

<body>
    <ul id="lista">

    </ul>

    <script>
        if (window.XMLHttpRequest) {
            peticion_http = new XMLHttpRequest();
        } else if (window.ActiveXObject) {
            peticion_http = new ActiveXObject("Microsoft.XMLHTTP");
        } else {
            alert("Su navegador no soporta ajax")
        }

        peticion_http.onreadystatechange = listarNoticias;
        peticion_http.open("GET", "noticias.xml", true);
        peticion_http.send(null);
    </script>
</body>